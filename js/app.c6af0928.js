(function(t){function e(e){for(var a,s,o=e[0],c=e[1],l=e[2],d=0,h=[];d<o.length;d++)s=o[d],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&h.push(r[s][0]),r[s]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);u&&u(e);while(h.length)h.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],a=!0,o=1;o<n.length;o++){var c=n[o];0!==r[c]&&(a=!1)}a&&(i.splice(e--,1),t=s(s.s=n[0]))}return t}var a={},r={app:0},i=[];function s(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=a,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(n,a,function(e){return t[e]}.bind(null,a));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/bchrep/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var a=n("328f"),r=n.n(a);r.a},1:function(t,e){},2:function(t,e){},"23f0":function(t,e,n){},3:function(t,e){},"328f":function(t,e,n){},4:function(t,e){},5:function(t,e){},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var a,r,i,s,o,c,l,u,d,h,f,p,v,g,b,m,w,_,y,C,x,k,R,A,I=n("2b0e"),O=n("5f5b"),T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Bitbox")},S=[],P=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"App"},[n("div",{staticClass:"container"},[t._m(0),n("hr"),t._m(1),n("hr"),t._m(2),n("hr"),n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("h2",[t._v("\n          Spec\n        ")]),t._m(3),n("h4",[t._v("Registration")]),t._m(4),t._m(5),n("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.collapse-1",modifiers:{"collapse-1":!0}}],attrs:{variant:"info"}},[t._v("Show example")]),n("b-collapse",{staticClass:"alert alert-secondary",attrs:{id:"collapse-1",role:"alert"}},[n("b-card",[n("a",{attrs:{href:"https://explorer.bitcoin.com/bch/tx/e1e0a657e00193fc150ccd35ce4d8325c31e2a3c05bfa49bd9844c964e2f94ff"}},[t._v("Here")]),t._v("\n            You can see an example of a registration transaction for the address "),n("code",[t._v("bitcoincash:qrqtx0hj9ghfkp8qzw4rvuhlyuk33cqqsqkkls5cu0")]),t._v(", which OP_RETURN structure is as follows:\n            "),n("ul",[n("li",[n("code",[t._v("OP_RETURN")])]),n("li",[n("code",[t._v("0abcde1d")]),t._v(" - prefix version of a registering transaction (provvisional)\n              ")]),n("li",[n("code",[t._v("c0b33ef22a2e9b04e013aa3672ff272d18e00080")]),t._v(" - Hash160 of the address \n              ")]),n("li",[n("code",[t._v("20f567dc52d5c53f09c76eb23ac31c4e90c42122382762bd591becfbe6cd1d325a5d145cf0f9e49edad8fe571a7bd78a0d39a946b46860d2f1157b1a88362092d5")]),t._v(" - signature of the above (without OP_RETURN and version prefix) in hex (translates to "),n("code",[t._v("IPVn3FLVxT8Jx26yOsMcTpDEISI4J2K9WRvs++bNHTJaXRRc8PnkntrY/lcae9eKDTmpRrRoYNLxFXsaiDYgktU=")]),t._v(").\n              ")])]),t._v("\n            Go ahead a check the signature in Electron Cash, or your preferred software. \n          ")])],1),n("hr"),n("h4",[t._v("Transaction")]),t._m(6),t._m(7),n("hr"),n("h4",[t._v("Rating")]),t._m(8),n("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.collapse-2",modifiers:{"collapse-2":!0}}],attrs:{variant:"info"}},[t._v("Show example")]),n("b-collapse",{staticClass:"alert alert-secondary",attrs:{id:"collapse-2",role:"alert"}},[n("b-card",[n("a",{attrs:{href:"https://explorer.bitcoin.com/bch/tx/85e8a31f148fef6e7fdbf7685cd78b7cc5c8e58df3340bde1c246b2a5ac82ecf"}},[t._v("Here")]),t._v("\n            You can see an example of a rating of the transaction "),n("code",[t._v("23e2a31495ab30e5f99e647c45c3b8b0201531918eda18296cf5c42bbf9b4553")]),t._v(", that involved "),n("code",[t._v("bitcoincash:qqqdfw4md8zan9wf52809ycv7stlgrcycusmcc3drh")]),t._v(" and "),n("code",[t._v("bitcoincash:qrqtx0hj9ghfkp8qzw4rvuhlyuk33cqqsqkkls5cu0")]),t._v(", which OP_RETURN structure is as follows:\n            "),n("ul",[n("li",[n("code",[t._v("OP_RETURN")])]),n("li",[n("code",[t._v("0abcde1f")]),t._v(" - prefix version of a rating transaction\n              ")]),n("li",[n("code",[t._v("00d4babb69c5d995c9a28ef2930cf417f40f04c7")]),t._v(" - Hash160 of the digital identity that is being rated ("),n("code",[t._v("bitcoincash:qqqdfw4md8zan9wf52809ycv7stlgrcycusmcc3drh")]),t._v(")\n              ")]),n("li",[n("code",[t._v("c0b33ef22a2e9b04e013aa3672ff272d18e00080")]),t._v(" - Hash160 of the digital identity that is rating ("),n("code",[t._v("bitcoincash:qrqtx0hj9ghfkp8qzw4rvuhlyuk33cqqsqkkls5cu0")]),t._v(")\n              ")]),n("li",[n("code",[t._v("23e2a31495ab30e5f99e647c45c3b8b0201531918eda18296cf5c42bbf9b4553")]),t._v(" - Transaction id of the trade between them\n              ")]),n("li",[n("code",[t._v("99")]),t._v(" - the actual rating\n              ")]),n("li",[n("code",[t._v("1f6ee301b3ee5b4e268a1a22b189a8546b100e4185697117d209ea8ca874053ec73c4c478e08c79b2d5cb291d308b8cfd1c06c23e12061024ab152e2a69039829e")]),t._v(" - signature of all of the above (without OP_RETURN and version prefix) in hex (translates to "),n("code",[t._v("H27jAbPuW04mihoisYmoVGsQDkGFaXEX0gnqjKh0BT7HPExHjgjHmy1cspHTCLjP0cBsI+EgYQJKsVLippA5gp4=")]),t._v(").\n              ")])]),t._v('\n            Go ahead a check the signature in Electron Cash, or your preferred software (the "message" is the concatenation of the above strings without spaces, and the "address" is the cashaddress of the rating indentity).\n          ')])],1),n("hr"),n("h2",[t._v("Reputation")]),t._m(9),n("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.collapse-3",modifiers:{"collapse-3":!0}}],attrs:{variant:"info"}},[t._v("Show example")]),n("b-collapse",{staticClass:"alert alert-secondary",attrs:{id:"collapse-3",role:"alert"}},[n("b-card",[n("a",{attrs:{href:"https://bitdb.bitcoin.com/explorer/ewogICJ2IjogMywKICAicSI6IHsKICAgICJmaW5kIjogewogICAgICAib3V0LmIxIjogewogICAgICAgICIkcmVnZXgiOiAiXkNyemVId0RVdXJ0cHhkbVZ5YUtPOHBNTTlCZjBEd1RIIgogICAgICB9CiAgICAgIAogICAgfSwKICAgICJsaW1pdCI6IDEwCiAgfQp9"}},[t._v("Here")]),t._v("\n            You can see all the ratings of the address "),n("code",[t._v("bitcoincash:qqqdfw4md8zan9wf52809ycv7stlgrcycusmcc3drh")]),t._v("."),n("br"),t._v("\n            You can also see a simple mean of all of its ratings "),n("a",{attrs:{href:"https://bitdb.bitcoin.com/explorer/ewogICJ2IjogMywKICAicSI6IHsKICAgICJmaW5kIjogewogICAgICAib3V0LmIxIjogewogICAgICAgICIkcmVnZXgiOiAiXkNyemVId0RVdXJ0cHhkbVZ5YUtPOHBNTTlCZjBEd1RIIgogICAgICB9CiAgICAgIAogICAgfSwKICAgICJsaW1pdCI6IDEwCiAgfSwKICAiciI6IHsKICAgICJmIjogIlsgbGVuZ3RoIGFzICRhcnJheV9sZW5ndGggfCByZWR1Y2UgKC5bXSB8IC5vdXRbMV0gfCAuaDFbMTUyOjE1NF0gIHwgdG9udW1iZXIpIGFzICRpdGVtICgwOyAuICsgJGl0ZW0pIC8gJGFycmF5X2xlbmd0aCB8IHRvc3RyaW5nIF0iCiAgfQp9"}},[t._v("here")]),t._v("."),n("br"),t._v("\n            Obviously, a real reputation function would use a more elaborate aggregation function.\n           ")])],1),n("hr"),n("h2",[t._v("Use cases")]),t._m(10),n("h2",[t._v("Future work")]),n("p",[t._v("\n          As of now, the system works with basic addresses and transactions, but it could probably be made to work with CashAccounts and CashIntents.\n        ")]),t._m(11),t._m(12),t._m(13)],1)]),n("h1",[t._v("Tutorial")]),t._m(14),n("p",{staticClass:"text-center"},[n("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.collapse-tutorial",modifiers:{"collapse-tutorial":!0}}],attrs:{variant:"danger"}},[t._v("I am responsible for my funds, show me the tutorial")])],1),n("b-collapse",{attrs:{id:"collapse-tutorial"}},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-6 well"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"seed1textarea"}},[t._v("Create first wallet")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.seed1,expression:"seed1"}],staticClass:"form-control",staticStyle:{height:"100px"},attrs:{placeholder:"Paste mnemonic here or generate mnemonic"},domProps:{value:t.seed1},on:{input:function(e){e.target.composing||(t.seed1=e.target.value)}}})]),n("button",{staticClass:"btn btn-primary",attrs:{disabled:t.isNotEmpty(t.seed1)},on:{click:function(e){return t.generateMnemonic("seed1")}}},[t._v("Generate a mnemonic")]),t._v("  \n                "),n("button",{staticClass:"btn btn-primary",attrs:{disabled:t.wallet1},on:{click:function(e){return t.generateWallet("seed1","wallet1")}}},[t._v("Create wallet from mnemonic")]),t.wallet1?n("span",[n("hr"),n("p",[t._v("First wallet created! The default address is \n                    "),n("code",[t._v(t._s(t.getDefaultAddress(t.wallet1)))])]),n("p",[t._v(" Balance: "),n("code",[t._v(t._s(t.wallet1balance))]),t._v("  \n                    "),n("b-button",{attrs:{variant:"info",size:"sm"},on:{click:function(e){return t.updateBalance("wallet1")}}},[t._v("refresh")])],1)]):t._e()])])]),n("div",{staticClass:"col-6"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"seed1textarea"}},[t._v("Create second wallet")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.seed2,expression:"seed2"}],staticClass:"form-control",staticStyle:{height:"100px"},attrs:{placeholder:"Paste mnemonic here or generate mnemonic"},domProps:{value:t.seed2},on:{input:function(e){e.target.composing||(t.seed2=e.target.value)}}})]),n("button",{staticClass:"btn btn-primary",attrs:{type:"button",disabled:t.isNotEmpty(t.seed2)},on:{click:function(e){return t.generateMnemonic("seed2")}}},[t._v("Generate a mnemonic")]),t._v(" \n                "),n("button",{staticClass:"btn btn-primary",attrs:{type:"button",disabled:t.wallet2},on:{click:function(e){return t.generateWallet("seed2","wallet2")}}},[t._v("Create wallet from mnemonic")]),t.wallet2?n("span",[n("hr"),n("p",[t._v("Second wallet created! The default address is \n                    "),n("code",[t._v(t._s(t.getDefaultAddress(t.wallet2)))])]),n("p",[t._v(" Balance: "),n("code",[t._v(t._s(t.wallet2balance))]),t._v(" \n                    "),n("b-button",{attrs:{variant:"info",size:"sm"},on:{click:function(e){return t.updateBalance("wallet2")}}},[t._v("refresh")])],1)]):t._e()])])])]),"undefined"!==typeof t.wallet1&&"undefined"!==typeof t.wallet2?n("div",{staticClass:"row"},[n("div",{staticClass:"col text-center"},[n("button",{staticClass:"btn btn-primary",on:{click:function(e){t.register=!0}}},[t._v("I have saved my seeds in a safe place. Let me play.")]),t._v(" \n            "),n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-1",modifiers:{"modal-1":!0}}],staticClass:"btn btn-secondary"},[t._v("Send all funds to address")])],1),n("b-modal",{attrs:{id:"modal-1",title:"Send funds to address"},scopedSlots:t._u([{key:"modal-footer",fn:function(e){var a=e.cancel;return[n("b-button",{attrs:{size:"sm",variant:"info"},on:{click:function(t){return a()}}},[t._v("\n                  Cancel\n                ")])]}}],null,!1,2575041287)},[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"send-address"}},[t._v("Cash Address")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.toCashAddress,expression:"toCashAddress"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.toCashAddress},on:{input:function(e){e.target.composing||(t.toCashAddress=e.target.value)}}}),n("b-button",{staticClass:"btn btn-success",on:{click:function(e){return t.sendAllToAddress()}}},[t._v("Send")])],1),n("p",[t._v("If you're feeling generous, send the change to the author"),n("br"),n("code",[t._v("bitcoincash:qq5xn2e7untcr4lqaeh9rkt05nxlhqg63556c8g9t0")])]),n("b-form-textarea",{attrs:{readonly:""},model:{value:t.sendAllOutput,callback:function(e){t.sendAllOutput=e},expression:"sendAllOutput"}})],1)])])],1):t._e(),t.register?n("div",{staticClass:"row"},[n("div",{staticClass:"col-12 text-center"},[n("hr"),n("p",[t._v("\n              Now that you have two wallets and adresses, we can register a digital identity for each."),n("br"),t._v("\n              Be sure to independently verify all of the following transactions (eg. with a block explorer)\n            ")]),n("p",[t._v("Send a small amount of satoshis to each wallet, 3000 sats will do."),n("br"),t._v("Then click on the buttons to register for digital identities.")])]),n("div",{staticClass:"col-6"},[n("b-button",{attrs:{block:"",variant:"success"},on:{click:function(e){return t.registerIdentity("wallet1")}}},[t._v("Register digital Identity on the first wallet")]),n("b-form-textarea",{attrs:{readonly:""},model:{value:t.wallet1RegisterOutput,callback:function(e){t.wallet1RegisterOutput=e},expression:"wallet1RegisterOutput"}})],1),n("div",{staticClass:"col-6"},[n("b-button",{attrs:{block:"",variant:"success"},on:{click:function(e){return t.registerIdentity("wallet2")}}},[t._v("Register digital Identity on the second wallet")]),n("b-form-textarea",{attrs:{readonly:""},model:{value:t.wallet2RegisterOutput,callback:function(e){t.wallet2RegisterOutput=e},expression:"wallet2RegisterOutput"}})],1)]):t._e(),t.wallet1Registered&&t.wallet2Registered?n("div",{staticClass:"row"},[n("div",{staticClass:"col-12 text-center"},[n("hr"),n("p",[t._v("\n              Perfect! Now that you have your identities, you can make them interact."),n("br"),t._v("\n              Use the button to send a (small) economic transaction between them.\n            ")])]),n("div",{staticClass:"col-md-8 offset-md-2"},[n("b-button",{attrs:{block:"",variant:"success"},on:{click:function(e){return t.makeTransaction()}}},[t._v("Send a small 1000 satoshi transaction from the left wallet to the right"),n("br"),t._v("(Be sure to have sufficient funds)")]),n("b-form-textarea",{attrs:{readonly:""},model:{value:t.transactionOutput,callback:function(e){t.transactionOutput=e},expression:"transactionOutput"}})],1)]):t._e(),t.transacted?n("div",{staticClass:"row"},[n("div",{staticClass:"col-12 text-center"},[n("hr"),n("p",[t._v("\n              You now have two digital identities that engaged in economic exchange."),n("br"),t._v("\n              The onchain transaction (the proof of their exchange) is eligible for rating from both parties."),n("br"),t._v("\n              In assigning a rating to their interaction, one party effectively rates the other.\n            ")])]),n("div",{staticClass:"col-6"},[n("p",[t._v("Set a rating for the latest transaction from the left digital identity to the right")]),n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"left-rating"}},[t._v("Insert rating (0 to 99)")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.wallet1Rating,expression:"wallet1Rating"}],attrs:{type:"number",min:"0",max:"99"},domProps:{value:t.wallet1Rating},on:{input:function(e){e.target.composing||(t.wallet1Rating=e.target.value)}}})]),n("b-button",{attrs:{block:"",variant:"success"},on:{click:function(e){return t.rateTransaction("wallet1")}}},[t._v("Send Rating")]),n("b-form-textarea",{attrs:{readonly:""},model:{value:t.wallet1RatingOutput,callback:function(e){t.wallet1RatingOutput=e},expression:"wallet1RatingOutput"}})],1),n("div",{staticClass:"col-6"},[n("p",[t._v("Set a rating for the latest transaction from the right digital identity to the left")]),n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"left-rating"}},[t._v("Insert rating (0 to 99)")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.wallet2Rating,expression:"wallet2Rating"}],attrs:{type:"number",min:"0",max:"99"},domProps:{value:t.wallet2Rating},on:{input:function(e){e.target.composing||(t.wallet2Rating=e.target.value)}}})]),n("b-button",{attrs:{block:"",variant:"success"},on:{click:function(e){return t.rateTransaction("wallet2")}}},[t._v("Send Rating")]),n("b-form-textarea",{attrs:{readonly:""},model:{value:t.wallet2RatingOutput,callback:function(e){t.wallet2RatingOutput=e},expression:"wallet2RatingOutput"}})],1)]):t._e(),t.wallet1Rated&&t.wallet2Rated?n("div",{staticClass:"row"},[n("div",{staticClass:"col-12 text-center"},[n("hr"),n("p",[t._v("\n              Excellent, you've completed the tutorial. You can now check the details of the ratings."),n("br"),t._v("Be sure to use the 'Send all funds' button above or take your seeds with you, else the funds will be lost forever.\n            ")]),n("p",[t._v("\n              You can also compute a simple reputation function for the identities. NB: Spec constraints aren't enforced, and this functionality is somewhat out of the scope of this tutorial.\n            ")]),n("p",[t._v("\n              If you want to check the sources of this tutorial "),n("a",{attrs:{href:"https://github.com/mtrycz/bchrep"}},[t._v("here")]),t._v(".\n            ")])]),n("div",{staticClass:"col-6"},[n("b-button",{attrs:{variant:"primary"},on:{click:function(e){return t.checkRatingTx("wallet1")}}},[t._v("Decode the latest rating transaction from the left identity")]),n("b-button",{attrs:{variant:"primary"},on:{click:function(e){return t.checkReputation("wallet1")}}},[t._v("Check the average reputation for the left identity")]),n("b-form-textarea",{staticStyle:{"min-height":"550px"},attrs:{readonly:""},model:{value:t.wallet1CheckOutput,callback:function(e){t.wallet1CheckOutput=e},expression:"wallet1CheckOutput"}})],1),n("div",{staticClass:"col-6"},[n("b-button",{attrs:{variant:"primary"},on:{click:function(e){return t.checkRatingTx("wallet2")}}},[t._v("Decode the latest rating transaction from the right wallet")]),n("b-button",{attrs:{variant:"primary"},on:{click:function(e){return t.checkReputation("wallet2")}}},[t._v("Check the average reputation for the right identity")]),n("b-form-textarea",{staticStyle:{"min-height":"550px"},attrs:{readonly:""},model:{value:t.wallet2CheckOutput,callback:function(e){t.wallet2CheckOutput=e},expression:"wallet2CheckOutput"}})],1)]):t._e()]),n("hr"),t._m(15)],1)])},H=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h1",{staticClass:"mt-5"},[t._v("A decentralised rating system for building trustless reputation systems"),n("br"),t._v("Status: Request For Comments")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("p",[t._v("\n          This page describes a simple reputation system built on Bitcoin Cash. This includes a spec for the system, and a live tutorial (WIP)"),n("br"),t._v("\n          This system was inspired by the "),n("a",{attrs:{href:"https://drive.google.com/file/d/1SnRdVeGoPkkdk2lXtdjDfy7c0z1ZlmRE/view"}},[t._v("Freedom Project")]),t._v(". As such, it's meant to be modular and interoperable. "),n("br"),t._v("\n          A rough JavaScript/Bitbox implmentation resides "),n("a",{attrs:{href:"https://github.com/mtrycz/bchrep/"}},[t._v("here")]),t._v(".\n        ")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("h2",[t._v("Rationale")]),n("p",[t._v("A simple "),n("strong",[t._v("rating system")]),t._v(" is presented. A "),n("strong",[t._v("reputation system")]),t._v(" can easily be built upon the rating system.")]),n("p",[t._v("Many reputation systems are tied to the platforms (and third parties) they reside on and they build on proprietary data (ex. a user can't bring their reputation from Booking to AirBnb). The presented system is meant to be trustless and interoperable: the users own their digital identities, the rating data is forever public.")]),n("p",[t._v("Many reputation systems are overly complicated because they seek to provide value to who runs them. The presented system is meant to provide value to participants, but can't be directly monetized (ie. the author can't make more money out of this than anyone else).")]),n("p",[t._v("When building upon the rating system, anyone can freely build their own reputation service, weather for personal use or as a service provider. An example of a (very simple) reputation function is presented."),n("br"),t._v("\n        A reputation service provider can make their aggregation function public (to be fully auditable), or add their secret sauce while providing value to its users. Either way, they don't own their data.")]),n("p",[t._v("NB: This system is not mean to provide reputation for social networks (ex. Twitter, Reddit, ...). The basic unit of interaction eligible for rating is an economic transaction. As such this system is more fitting for economic platforms (Eg. Bay, Uber, ...). ")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("Two "),n("strong",[t._v("digital identities")]),t._v(" that "),n("strong",[t._v("transact")]),t._v(" onchain, can "),n("strong",[t._v("rate")]),t._v(" their interaction. A combination an identity's recieved ratings amount to its "),n("strong",[t._v("reputation")]),t._v(".")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v('\n          A digital identity is simply a public address on the BCH network. A user registers for the reputation system by proving the ownership of the private key to that address. This amounts to saying "I hereby claim to own the address [...], and here is the proof: [...]".'),n("br"),t._v("\n          The registration action is an OP_RETURN transaction with \n          "),n("ul",[n("li",[n("a",{attrs:{href:"https://github.com/bitcoincashorg/bitcoincash.org/blob/master/spec/op_return-prefix-guideline.md"}},[t._v("Prefix version")]),t._v(" \n               "),n("code",[t._v("0abcde1d")]),t._v(" (provvisional)\n            ")]),n("li",[t._v("\n              The Hash160 representation of the address to be registered as the digital identity"),n("br"),t._v("\n              (Optional: the address can be bound to a "),n("a",{attrs:{href:"https://www.cashaccount.info/"}},[t._v("CashAccount")]),t._v(" or any other identity scheme. It's intended to be interoperable).\n            ")]),n("li",[t._v("\n              The signature of the address, made with the private key and the address itself.\n            ")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("The participation in the reputation system is entirely voluntary."),n("br"),t._v(" The identities are disposable, anyone can register as many as they want.")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("\n          If two digital identities agree to trade, they complete a transaction onchain from one identity to the other (ie. from one bitcoincash address to the other)."),n("br"),t._v("\n          A transaction made between two digital identities is eligible for rating from both identities."),n("br")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[n("a",{attrs:{href:"https://explorer.bitcoin.com/bch/tx/23e2a31495ab30e5f99e647c45c3b8b0201531918eda18296cf5c42bbf9b4553"}},[t._v("Here")]),t._v(" you can see a transaction between two registered digital identities.\n\n        ")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("\n          After the identities have engaged in trade, they can rate their interaction/transaction."),n("br"),t._v("\n          Each party can rate the transaction only once, and they can do so within a timeframe."),n("br"),t._v("\n          A rating is an onchain transaction with an OP_RETURN output with\n          "),n("ul",[n("li",[t._v("\n              Prefix version "),n("code",[t._v("0abcde1f")]),t._v(" (Provvisional)\n            ")]),n("li",[t._v("\n              Hash160 representation of the address of the identity that is being rated\n            ")]),n("li",[t._v("\n              Hash160 representation of the address of the identity that is rating\n            ")]),n("li",[t._v("\n              Transactionid of the interaction between the identities\n            ")]),n("li",[t._v("\n              Rating expressed as an integer in range 0 to 99\n            ")]),n("li",[t._v("\n              Signature of all of the above, signed by the identity that is rating\n            ")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("\n          A "),n("strong",[t._v("reputation")]),t._v(" of a digital identity can be computed as a function of the individual ratings."),n("br"),t._v("\n          Since the ratings are public, anyone can define and run their own function, but it's probable that dedicated reputation services will arise."),n("br"),t._v("\n          The reputation system is intentionally independent, but interoperable with the rating system. \n        ")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("\n          Straight simple use cases include matchmaking platforms (deBay, deUber, deAirBnb, ...), where merchants and users are rated as trustworthy, but other uses are possbile."),n("br"),t._v('\n          One example is anti-scalping measures: a band might decide to sell tickets only to legit digital identities with a track record of "normal" usage. This way bots can\'t frontrun everybody else and sell the tickets later at a premium.'),n("br")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("\n          This system is based on the publicity of the rating data. It could be a privacy concern for participants."),n("br"),t._v("\n          One can't have both perfect publicity AND confidentiality, but some degree of confidentiality can be achieved. For example the digital identities need not transact from their public addresses; instead they can sign a hashed OP_RETURN message that will only be revealed when a rating occurs. This way their interaction will still be public, but not in real-time.\n        ")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("\n          As of now, the rating system is purely p2p, there are no third parties present."),n("br"),t._v("\n          To meet, the digital identities will need some kind of market or matchmaking service (out of the scope of this document), that can optionally verify the realworld identity of the participants."),n("br"),t._v("\n          Also, the matchmaking service can verify that the transaction between the digital identities have met and transacted through its platform. Reputation services can choose to assign a different weight to matchmakers they trust more"),n("br")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("\n          Examples:"),n("br"),t._v("\n          Coinbase already has your KYC. A user can ask Coinbase to verify (onchain) that their digital identity is tied to a realworld identity; the actual identity need not be released, just a certificate."),n("br"),t._v("\n          A user might prefer to transact with digital identities that are somehow verified. For example, I'd rather have a Uber drive from someone that is known to a trusted third party."),n("br")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("\n        In this tutorial:\n        "),n("ul",[n("li",[t._v("\n            you'll create two wallets and get the default cashaddresses for them.\n          ")]),n("li",[t._v("\n            You'll register the addresses as digital identities.\n          ")]),n("li",[t._v("\n            You'll send a sample economic transaction from one to the other.\n          ")]),n("li",[t._v("\n            Finally, you'll rate the transaction from the perspective of both digital identities.\n          ")])]),t._v("\n        Please remember that all of this is happening on the live BCH mainchain straight from your browser to the network through Bitbox. If any of this sounds confusing, chances are this tutorial is not for you."),n("br"),t._v("\n        You have the option to send everything back to an address you own at any time, but please do take the time to save your seeds in case your browser crashes.\n      ")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",{staticClass:"text-center"},[t._v("Made with love on BCH with "),n("a",{attrs:{href:"https://developer.bitcoin.com/bitbox"}},[t._v("Bitbox")]),t._v(".")])}],B=n("8240"),N=n("b314").BITBOX,E=new N,j={name:"BitBox",data:function(){return{register:o,seed1:a,seed2:r,wallet1:i,wallet2:s,getDefaultAddress:function(t){return E.HDNode.toCashAddress(t)},wallet1balance:c,wallet2balance:l,wallet1Registered:u,wallet2Registered:d,wallet1RegisterOutput:h,wallet2RegisterOutput:f,transacted:p,transactionId:v,transactionOutput:g,wallet1Rating:b,wallet1Rated:m,wallet1RatingOutput:w,wallet2Rating:_,wallet2Rated:y,wallet2RatingOutput:C,toCashAddress:x,sendAllOutput:k,wallet1CheckOutput:R,wallet2CheckOutput:A}},methods:{isNotEmpty:function(t){var e="undefined"===typeof t||""===t;return!e},generateMnemonic:function(t){this[t]=E.Mnemonic.generate(256,E.Mnemonic.wordLists()["english"])},updateBalance:function(t){var e=this;E.Address.details(E.HDNode.toCashAddress(this[t])).then((function(n){e[t+"balance"]=n.balance+n.unconfirmedBalance}),(function(n){e[t+"balance"]=n}))},generateWallet:function(t,e){var n=E.Mnemonic.toSeed(this[t]),a=E.HDNode.fromSeed(n,"mainnet");this[e]=a,this.updateBalance(e)},registerIdentity:function(t){var e=this;e[t+"RegisterOutput"]="loading",B["a"](this[t]).then((function(n){e[t+"RegisterOutput"]="Identity registered in transaction "+n,e[t+"Registered"]=!0}),(function(n){e[t+"RegisterOutput"]=n}))},makeTransaction:function(){var t=this;t.transactionOutput="loading",B["f"](this.wallet1,this.wallet2,1e3).then((function(e){t.transactionId=e,t.transactionOutput="Sent successfully in transaction "+e,t.transacted=!0}),(function(e){t.transactionOutput=e}))},rateTransaction:function(t){var e="wallet1"===t?"wallet2":"wallet1",n=this;n[t+"RatingOutput"]="loading",B["d"](E.HDNode.toCashAddress(this[e]),E.HDNode.toCashAddress(this[t]),this.transactionId,this[t+"Rating"],this[t]).then((function(e){n[t+"RatingOutput"]=e,n[t+"Rated"]=!0}),(function(e){n[t+"RatingOutput"]=e}))},sendAllToAddress:function(){var t=this;E.Address.isCashAddress(this.toCashAddress)?(B["e"](this.wallet1,this.toCashAddress).then((function(e){t.sendAllOutput+="Left wallet output "+e+"<br>"}),(function(e){t.sendAllOutput+="Left wallet output "+e})),B["e"](this.wallet2,this.toCashAddress).then((function(e){t.sendAllOutput+="Right wallet output "+e+"<br>"}),(function(e){t.sendAllOutput+="Right wallet output "+e}))):this.sendAllOutput="Not a valid cashaddress."},checkRatingTx:function(t){var e=this;e[t+"CheckOutput"]="loading",B["b"](e[t+"RatingOutput"]).then((function(n){e[t+"CheckOutput"]=JSON.stringify(n,null,2)}),(function(n){e[t+"CheckOutput"]=n}))},checkReputation:function(t){var e=this;e[t+"CheckOutput"]="loading",B["c"](this[t]).then((function(n){e[t+"CheckOutput"]=JSON.stringify(n,null,2)}),(function(n){e[t+"CheckOutput"]=n}))}}},q=j,K=(n("daa9"),n("2877")),D=Object(K["a"])(q,P,H,!1,null,"021f5701",null),$=D.exports,U={name:"app",components:{Bitbox:$}},V=U,J=(n("034f"),Object(K["a"])(V,T,S,!1,null,null,null)),L=J.exports;n("f9e3"),n("2dd8");I["default"].use(O["a"]),I["default"].config.productionTip=!1,new I["default"]({render:function(t){return t(L)}}).$mount("#app")},8240:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return u})),n.d(e,"f",(function(){return h})),n.d(e,"d",(function(){return v})),n.d(e,"b",(function(){return w})),n.d(e,"e",(function(){return y})),n.d(e,"c",(function(){return x}));n("ac6a"),n("7514"),n("96cf"),n("6b54");var a=n("3b8d"),r=n("b314"),i=new r["BITBOX"],s=t.from("0abcde1d","hex"),o=(t.from("0abcde1e","hex"),t.from("0abcde1f","hex"));function c(t,e){return l.apply(this,arguments)}function l(){return l=Object(a["a"])(regeneratorRuntime.mark((function t(e,n){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=n||1e3,t.next=3,i.Address.utxo(e);case 3:if(a=t.sent,r=a.utxos.find((function(t){return t.satoshis>=1e3})),!r){t.next=9;break}return t.abrupt("return",r);case 9:throw"No suitable utxo for transaction. Send more funds.";case 10:case"end":return t.stop()}}),t)}))),l.apply(this,arguments)}function u(t,e){return d.apply(this,arguments)}function d(){return d=Object(a["a"])(regeneratorRuntime.mark((function e(n,a){var r,o,l,u,d,h,f,p,v,g,b,m,w;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=a||"mainnet",r=new i.TransactionBuilder(a),l=i.HDNode.toCashAddress(n),u=i.Address.cashToHash160(l),d=t.from(u,"hex"),h=i.BitcoinCash.signMessageWithPrivKey(n.keyPair.toWIF(),u),f=t.concat([s,d,t.from(h,"base64")]),console.log(h),p=i.Script.encode([i.Script.opcodes.OP_RETURN,f]),console.log(p),v=i.BitcoinCash.getByteCount({P2PKH:1},{P2PKH:1}),v+=f.length,v+=h.length,v+=9,e.next=16,c(l);case 16:return g=e.sent,r.addInput(g.txid,g.vout),r.addOutput(l,g.satoshis-v),r.addOutput(p,0),r.setLockTime(0),r.sign(0,n.keyPair,o,r.hashTypes.SIGHASH_ALL,g.satoshis,r.signatureAlgorithms.SCHNORR),b=r.build(),m=b.toHex(),console.log("Sending tx from "+g.txid+" with op_return "+s+d.toString()+h+" contentBuffer length "+f.length),e.next=27,i.RawTransactions.sendRawTransaction(m);case 27:return w=e.sent,console.log(w),e.abrupt("return",w);case 30:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}function h(t,e,n,a){return f.apply(this,arguments)}function f(){return f=Object(a["a"])(regeneratorRuntime.mark((function t(e,n,a,r){var s,o,l,u,d,h,f,p,v,g,b;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=r||"mainnet",s=new i.TransactionBuilder(r),l=i.HDNode.toCashAddress(e),u=i.HDNode.toCashAddress(n),t.next=6,c(l,a);case 6:return d=t.sent,h=i.BitcoinCash.getByteCount({P2PKH:1},{P2PKH:2}),f=d.satoshis,p=a,v=h,s.addInput(d.txid,d.vout),s.addOutput(u,p),s.addOutput(l,f-p-v),s.setLockTime(0),s.sign(0,e.keyPair,o,s.hashTypes.SIGHASH_ALL,f,s.signatureAlgorithms.SCHNORR),g=s.build(),b=g.toHex(),t.next=20,i.RawTransactions.sendRawTransaction(b);case 20:return t.abrupt("return",t.sent);case 21:case"end":return t.stop()}}),t)}))),f.apply(this,arguments)}function p(e,n,a,r){var s=t.from(i.Address.cashToHash160(e),"hex"),o=t.from(i.Address.cashToHash160(n),"hex"),c=t.from(a,"hex");r=2==r.toString().length?r:"0"+r;r=t.from(r.toString(),"hex");var l=t.concat([s,o,c,r]);return l}function v(t,e,n,a,r,i){return g.apply(this,arguments)}function g(){return g=Object(a["a"])(regeneratorRuntime.mark((function e(n,a,r,s,l,u){var d,h,f,v,g,b,m,w,_,y,C;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return u=u||"mainnet",d=new i.TransactionBuilder(u),f=p(n,a,r,s),v=i.BitcoinCash.signMessageWithPrivKey(l.keyPair.toWIF(),f.toString()),g=t.concat([o,f,t.from(v,"base64")]),b=i.Script.encode([i.Script.opcodes.OP_RETURN,g]),console.log(b),e.next=9,c(a);case 9:return m=e.sent,w=i.BitcoinCash.getByteCount({P2PKH:1},{P2PKH:1}),w+=g.length,w+=9,_=m.satoshis,d.addInput(m.txid,m.vout),d.addOutput(a,_-w),d.addOutput(b,0),d.setLockTime(0),d.sign(0,l.keyPair,h,d.hashTypes.SIGHASH_ALL,_,d.signatureAlgorithms.SCHNORR),y=d.build(),C=y.toHex(),console.log("Sending tx from "+m.txid+" with op_return "+o+f+v+" contentBuffer length "+g.length),e.next=24,i.RawTransactions.sendRawTransaction(C);case 24:return e.abrupt("return",e.sent);case 25:case"end":return e.stop()}}),e)}))),g.apply(this,arguments)}function b(t){return m.apply(this,arguments)}function m(){return m=Object(a["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i.Transaction.details(e.ratedTransaction);case 2:if(n=t.sent,console.log(n),n.vin[0].cashAddress!==e.reviewer){t.next=9;break}return console.log("from matched with reviewer"),t.abrupt("return",n.vout.some((function(t){return t.scriptPubKey.cashAddrs.some((function(t){return t===e.reviewee}))})));case 9:if(n.vin[0].cashAddress!==e.reviewee){t.next=14;break}return console.log("from matched with reviewee"),t.abrupt("return",n.vout.some((function(t){return t.scriptPubKey.cashAddrs.some((function(t){return t===e.reviewer}))})));case 14:return console.log("from matched none"),t.abrupt("return",!1);case 16:case"end":return t.stop()}}),t)}))),m.apply(this,arguments)}function w(t){return _.apply(this,arguments)}function _(){return _=Object(a["a"])(regeneratorRuntime.mark((function e(n){var a,r,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i.Transaction.details(n);case 2:return a=e.sent,r=a.vout.find((function(t){return void 0===t.scriptPubKey.addresses})),s=r.scriptPubKey.asm,o={},o.version=s.substring(10,18),o.versionValid="0abcde1e"===o.version,o.reviewee160=s.substring(18,58),o.reviewee=i.Address.hash160ToCash(o.reviewee160),o.reviewer160=s.substring(58,98),o.reviewer=i.Address.hash160ToCash(o.reviewer160),o.ratedTransaction=s.substring(98,162),o.ratingHex=s.substring(162,164),o.rating=o.ratingHex.toString("16"),o.signature=t.from(s.substring(164),"hex").toString("base64"),console.log(o),s=p(o.reviewee,o.reviewer,o.ratedTransaction,o.rating),o.signatureValid=i.BitcoinCash.verifyMessage(o.reviewer,o.signature,s.toString()),e.next=21,b(o);case 21:return o.ratedTransactionValid=e.sent,e.abrupt("return",o);case 23:case"end":return e.stop()}}),e)}))),_.apply(this,arguments)}function y(t,e,n){return C.apply(this,arguments)}function C(){return C=Object(a["a"])(regeneratorRuntime.mark((function t(e,n,a){var r,s,o,c,l,u,d,h,f,p,v;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=a||"mainnet",r=new i.TransactionBuilder(a),t.next=4,i.Address.utxo(i.HDNode.toCashAddress(e));case 4:for(s=t.sent,o=0,c=[],l=0;l<s.utxos.length;l++)u=s.utxos[l],c.push(u),o+=u.satoshis,r.addInput(u.txid,u.vout);if(d=i.BitcoinCash.getByteCount({P2PKH:c.length},{P2PKH:1}),!(o-d<0)){t.next=12;break}return console.log("Transaction fee costs more combined UTXOs. Can't send transaction."),t.abrupt("return");case 12:return r.addOutput(n,o-d),c.forEach((function(t,n){r.sign(n,e.keyPair,h,r.hashTypes.SIGHASH_ALL,t.satoshis)})),f=r.build(),p=f.toHex(),t.next=18,i.RawTransactions.sendRawTransaction([p]);case 18:return v=t.sent,t.abrupt("return",v);case 20:case"end":return t.stop()}}),t)}))),C.apply(this,arguments)}function x(t,e){return k.apply(this,arguments)}function k(){return k=Object(a["a"])(regeneratorRuntime.mark((function e(n,a){var r,s,o,c,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=a||"mainnet",r=i.HDNode.toCashAddress(n),s=i.Address.cashToHash160(r),o="0abcde1f"+s,c="^"+t.from(o,"hex").toString("base64"),l={v:3,q:{find:{"out.b1":{$regex:c}},limit:999},r:{f:"[ length as $array_length | reduce (.[] | .out[1] | .h1[152:154]  | tonumber) as $item (0; . + $item) / $array_length | tostring ]"}},e.abrupt("return",i.BitDB.get(l));case 7:case"end":return e.stop()}}),e)}))),k.apply(this,arguments)}}).call(this,n("b639").Buffer)},daa9:function(t,e,n){"use strict";var a=n("23f0"),r=n.n(a);r.a}});
//# sourceMappingURL=app.c6af0928.js.map